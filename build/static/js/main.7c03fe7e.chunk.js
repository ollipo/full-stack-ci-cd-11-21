(this["webpackJsonpredux-anecdotes"]=this["webpackJsonpredux-anecdotes"]||[]).push([[0],{58:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n(7),u=n.n(a),i=n(3),o=n(2),s=n.n(o),d=n(5),f=n(26),l=n(14),p=n(8),j=n.n(p),v="/anecdotes",O={getAll:function(){var t=Object(d.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get(v);case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),createNew:function(){var t=Object(d.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:e,votes:0},t.next=3,j.a.post(v,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(d.a)(s.a.mark((function t(e,n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.put("".concat(v,"/").concat(e),n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"NEW_ANECDOTE":return[].concat(Object(f.a)(t),[e.data]);case"INIT_ANECDOTES":return e.data;case"VOTE":var n=e.data.id;return t.map((function(t){return t.id!==n?t:e.data}));default:return t}},h=function(t,e){return function(){var n=Object(d.a)(s.a.mark((function n(c){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(x(t));case 2:r&&(clearTimeout(r),r=null),r=setTimeout((function(){c(w())}),1e3*e);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},x=function(t){return{type:"SET_NOTIFICATION",notification:t}},w=function(){return{type:"REMOVE_NOTIFICATION"}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_NOTIFICATION":return e.notification;case"REMOVE_NOTIFICATION":return null;default:return t}},T=n(1),y=Object(i.b)(null,{createAnecdote:function(t){return function(){var e=Object(d.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.createNew(t);case 2:r=e.sent,n({type:"NEW_ANECDOTE",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setNotification:h})((function(t){var e=function(){var e=Object(d.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=n.target.anecdote.value,n.target.anecdote.value="",t.createAnecdote(r),t.setNotification("you added anecdote: ".concat(r),5);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{children:"create new"}),Object(T.jsxs)("form",{onSubmit:e,children:[Object(T.jsx)("input",{name:"anecdote"}),Object(T.jsx)("button",{type:"submit",children:"create"})]})]})})),m=function(t){var e=t.anecdote,n=t.handleClick;return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{children:e.content}),Object(T.jsxs)("div",{children:["has ",e.votes,Object(T.jsx)("button",{onClick:n,children:"vote"})]})]})},N=function(){var t=Object(i.d)((function(t){return t.anecdotes})),e=Object(i.d)((function(t){return t.filter})),n=Object(i.c)(),r=function(t){n(function(t){return function(){var e=Object(d.a)(s.a.mark((function e(n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.a)(Object(l.a)({},t),{},{votes:t.votes+1}),e.next=3,O.update(r.id,r);case 3:c=e.sent,n({type:"VOTE",data:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t)),n(h("you voted: ".concat(t.content),5))};return Object(T.jsx)("div",{children:t.filter((function(t){return t.content.search(new RegExp(e,"i"))>-1})).sort((function(t,e){return e.votes-t.votes})).map((function(t){return Object(T.jsx)(m,{anecdote:t,handleClick:function(){return r(t)}},t.id)}))})},I=Object(i.b)((function(t){return{notification:t.notification}}))((function(t){var e=t.notification;if(null===e)return null;return Object(T.jsx)("div",{style:{border:"solid",padding:10,borderWidth:1},children:e})})),g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_FILTER":return e.filter;default:return t}},k=Object(i.b)(null,{setFilter:function(t){return{type:"SET_FILTER",filter:t}}})((function(t){return Object(T.jsxs)("div",{style:{marginBottom:10},children:["filter ",Object(T.jsx)("input",{onChange:function(e){var n=e.target.value;t.setFilter(n)}})]})})),A=function(){var t=Object(i.c)();return Object(c.useEffect)((function(){t(function(){var t=Object(d.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getAll();case 2:n=t.sent,e({type:"INIT_ANECDOTES",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]),Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{children:"Anecdotes"}),Object(T.jsx)(I,{}),Object(T.jsx)(k,{}),Object(T.jsx)(N,{}),Object(T.jsx)(y,{})]})},C=n(6),_=n(24),F=n(25),S=Object(C.combineReducers)({anecdotes:b,notification:E,filter:g}),D=Object(C.createStore)(S,Object(F.composeWithDevTools)(Object(C.applyMiddleware)(_.a)));u.a.render(Object(T.jsx)(i.a,{store:D,children:Object(T.jsx)(A,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.7c03fe7e.chunk.js.map